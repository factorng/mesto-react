(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],[,,,,function(e,t,a){e.exports=a.p+"static/media/logo.c6f11019.svg"},,,,function(e,t,a){e.exports=a(15)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),c=a.n(o),i=(a(13),a(1)),l=a(4),s=a.n(l);var u=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:s.a,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e",className:"header__logo"}))},p=a(7),m=a(5),d=a(6),h={url:"https://mesto.nomoreparties.co/v1/cohort-13",auth:"bb89f9dd-ceae-40c2-90a7-950f4a7ba36d"},_=new(function(){function e(t){Object(m.a)(this,e),this.baseUrl=t.url,this.auth=t.auth}return Object(d.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{authorization:this.auth}}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",headers:{authorization:this.auth}}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.status))}))}},{key:"updateUserProfile",value:function(e,t){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this.auth,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.status))}))}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:this.auth,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return e.json()}))}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.auth,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.auth}}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.status))}))}},{key:"putLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this.auth}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," ").concat(e.statusText))})).then((function(e){return e}))}},{key:"removeLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this.auth}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," ").concat(e.statusText))})).then((function(e){return e}))}}]),e}())(h);var f=function(e){var t=e.link,a=e.name,n=e.likes,o=e.onCardClick;return r.a.createElement("div",{className:"place"},r.a.createElement("img",{src:t,alt:a,className:"place__image",onClick:function(){o({link:t,name:a})}}),r.a.createElement("button",{className:"place__button-delete",type:"button"}),r.a.createElement("div",{className:"place__description"},r.a.createElement("h3",{className:"place__title"},a),r.a.createElement("div",{className:"place__like"},r.a.createElement("button",{className:"place__button-like",type:"button"}),r.a.createElement("p",{className:"place__like-count"},n.length))))};a(14);var E=function(){return r.a.createElement("div",{className:"Spinner"})};var b=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,o=e.onCardClick,c=r.a.useState("name"),l=Object(i.a)(c,2),s=l[0],u=l[1],m=r.a.useState("description"),d=Object(i.a)(m,2),h=d[0],b=d[1],N=r.a.useState(""),v=Object(i.a)(N,2),k=v[0],g=v[1],j=r.a.useState([]),y=Object(i.a)(j,2),C=y[0],O=y[1],S=r.a.useState(!1),T=Object(i.a)(S,2),P=T[0],x=T[1];return r.a.useEffect((function(){x(!0),_.getUserInfo().then((function(e){u(e.name),b(e.about),g(e.avatar)})).catch((function(e){console.log(e)})),_.getInitialCards().then((function(e){O(e),x(!1)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("img",{src:k,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__logo"}),r.a.createElement("div",{className:"profile__avatar-hover",onClick:n}),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__user"},r.a.createElement("h3",{className:"profile__name"},s),r.a.createElement("p",{className:"profile__occupation"},h)),r.a.createElement("button",{className:"profile__edit-button",type:"button",onClick:t})),r.a.createElement("button",{className:"profile__add-button",type:"button",onClick:a})),r.a.createElement("section",{className:"places","aria-label":"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"},P?r.a.createElement(E,null):C.map((function(e){var t=e._id,a=Object(p.a)(e,["_id"]);return r.a.createElement(f,Object.assign({key:t,onCardClick:o},a))}))))};var N=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var v=function(e){var t=e.isOpen,a=e.className,n=e.formName,o=e.Submit,c=e.onClose,i=e.title,l=e.children,s=e.buttonText;return r.a.createElement("div",{className:t?"popup  ".concat(a," popup_open"):"popup  ".concat(a)},r.a.createElement("form",{className:"popup__form ".concat(n),method:"post",action:"#",noValidate:!0,onSubmit:o},r.a.createElement("button",{className:"popup__button-close",type:"button","aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:c}),r.a.createElement("h3",{className:"popup__title"},i),l,r.a.createElement("button",{className:"popup__button-submit",type:"submit"},s)))};var k=function(e){var t=e.isOpen,a=e.link,n=e.name,o=e.onClose;return r.a.createElement("div",{className:t?"popup show-photo popup_open":"popup show-photo"},r.a.createElement("div",{className:"show-photo__window"},r.a.createElement("button",{className:"popup__button-close show-photo__button-close",type:"button","aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:o}),r.a.createElement("img",{src:a.toString(),alt:n,className:"show-photo__image"}),r.a.createElement("p",{className:"show-photo__title"},n)))};var g=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(i.a)(o,2),l=c[0],s=c[1],p=r.a.useState(!1),m=Object(i.a)(p,2),d=m[0],h=m[1],_=r.a.useState({isOpen:!1,name:"",link:""}),f=Object(i.a)(_,2),E=f[0],g=f[1];function j(){h(!1),n(!1),s(!1),g({isOpen:!1,name:"",link:""})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(b,{onEditProfile:function(){n(!0)},onAddPlace:function(){s(!0)},onEditAvatar:function(){h(!0)},onCardClick:function(e){var t=e.name,a=e.link;g({isOpen:!0,name:t,link:a})}}),r.a.createElement(N,null),r.a.createElement(v,{isOpen:a,className:"edit-profile",formName:"edit-profile__form",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onClose:j,children:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{id:"input-name",className:"popup__input edit-profile__input-name",type:"text",name:"name",defaultValue:"",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",minLength:2,maxLength:40,pattern:"^[A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u0451 -]+$",required:!0}),r.a.createElement("span",{id:"input-name-error",className:"popup__input-error"})),r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{id:"input-occupation",className:"popup__input edit-profile__input-occupation",type:"text",name:"occupation",defaultValue:"",placeholder:"\u0420\u043e\u0434 \u0437\u0430\u043d\u044f\u0442\u0438\u0439",minLength:2,maxLength:200,required:!0}),r.a.createElement("span",{id:"input-occupation-error",className:"popup__input-error"})))}),r.a.createElement(v,{isOpen:l,className:"add-card",formName:"add-card__form",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onClose:j,children:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{className:"popup__input add-card__input-name",type:"text",id:"input-place-name",name:"name",defaultValue:"",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:2,maxLength:30,required:!0}),r.a.createElement("span",{id:"input-place-name-error",className:"popup__input-error"})),r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{className:"popup__input add-card__input-link",type:"url",id:"input-place-link",name:"link",defaultValue:"",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),r.a.createElement("span",{id:"input-place-link-error",className:"popup__input-error"})))}),r.a.createElement(v,{isOpen:d,className:"change-avatar",formName:"change-avatar__form",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onClose:j,children:r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{className:"popup__input change-avatar__input-link",type:"url",id:"change-avatar__input-link",name:"link",defaultValue:"",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),r.a.createElement("span",{id:"change-avatar__input-link-error",className:"popup__input-error"}))}),r.a.createElement(k,Object.assign({},E,{onClose:j})))};c.a.render(r.a.createElement(g,null),document.querySelector("#root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.d883daf5.chunk.js.map