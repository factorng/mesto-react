{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","utils/utils.js","utils/Api.js","components/ConfirmDeletePopup.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Spinner.js","components/App.js","index.js"],"names":["module","exports","Header","className","src","logoPath","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","user","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","onClick","type","length","apiSettings","url","auth","api","settings","this","baseUrl","fetch","method","headers","authorization","then","result","ok","json","Promise","reject","status","about","body","JSON","stringify","newAvatar","avatar","id","res","statusText","ConfirmDeletePopup","isOpen","formName","onSubmitClick","onClose","title","action","noValidate","onSubmit","e","preventDefault","aria-label","Main","onEditProfile","onAddPlace","onEditAvatar","cards","setCards","useState","isConfirmDeletePopupOpen","setConfirmDeletePopupOpen","cardToDeleteId","setCardToDeleteId","closeConfirmDeletePopup","handleCardLike","changeLikeCardStatus","newCard","newCards","map","c","catch","err","console","log","handleCardDelete","cardId","key","deleteCard","filter","Footer","ImagePopup","toString","PopupWithForm","Submit","children","buttonText","EditProfilePopup","setUser","setCurrentUser","setName","occupation","setOccupation","setButtonText","useEffect","updateUserProfile","value","onChange","target","placeholder","minLength","maxLength","pattern","required","EditAvatarPopup","inputRef","useRef","setUserAvatar","current","ref","defaultValue","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","addNewCard","Spinner","App","currentUser","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isLoading","setIsLoading","closeAllPopups","all","getUserInfo","getInitialCards","userData","Provider","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.d8ccf83f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.c6f11019.svg\";","import React from 'react';\r\nimport logoPath from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n    return (\r\n        <header className=\"header\">\r\n            <img src={logoPath} alt=\"логотип Место\" className=\"header__logo\" />\r\n        </header>\r\n    );\r\n}\r\n  \r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\r\n  const user = React.useContext(CurrentUserContext).user;\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === user._id;\r\n  \r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = (`place__button-delete ${isOwn ? '' : 'place__button-delete_hidden'}`);\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = card.likes.some(i => i._id === user._id);\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n  const cardLikeButtonClassName = (`place__button-like ${isLiked ? 'place__button-like_active' : ''}`);\r\n    \r\n  \r\n  return (\r\n    <div className=\"place\">\r\n      <img\r\n        src={card.link}\r\n        alt={card.name}\r\n        className=\"place__image\"\r\n        onClick={() => onCardClick(card.name, card.link)}\r\n      />\r\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={()=>onCardDelete(card._id)}/>\r\n      <div className=\"place__description\">\r\n        <h3 className=\"place__title\">{card.name}</h3>\r\n        <div className=\"place__like\">\r\n          <button className={cardLikeButtonClassName} type=\"button\" onClick={()=>onCardLike(card)}/>\r\n          <p className=\"place__like-count\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","const apiSettings = {\r\n    url: 'https://mesto.nomoreparties.co/v1/cohort-13',\r\n    auth: 'bb89f9dd-ceae-40c2-90a7-950f4a7ba36d'\r\n};\r\nexport default apiSettings;","import apiSettings from './utils.js'\n\nexport class Api {\n  constructor(settings) {\n    this.baseUrl = settings.url;\n    this.auth = settings.auth;\n  }\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/users/me`, {\n        method: 'GET',\n        headers: {\n          authorization: this.auth\n        }\n      })\n      .then(result => {\n        if(result.ok) {\n          return result.json();\n        }\n        return Promise.reject(`error${result.status}`);\n      });\n  }\n  getInitialCards() {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'GET',\n      headers: {\n        authorization: this.auth\n      }\n    })\n    .then(result => {\n      if(result.ok) {\n        return result.json();\n      }\n      return Promise.reject(`error${result.status}`);\n    });\n  }\n  updateUserProfile(name, about) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this.auth,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n    .then(result => {\n      if(result.ok) {\n        return result.json();\n      }\n      return Promise.reject(`error${result.status}`);\n    });\n  }\n  addNewCard(name, link) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this.auth,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n    .then(result => result.json());\n  }\n  setUserAvatar(newAvatar) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this.auth,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: newAvatar\n      })\n    })\n    .then(result => {\n      if(result.ok) {\n        return result.json();\n      }\n      return Promise.reject(`error${result.status}`);\n    });\n  }\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}/cards/${id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this.auth\n      }\n    })\n    .then(result => {\n      if(result.ok) {\n        return result.json();\n      }\n      return Promise.reject(`error${result.status}`);\n    });\n  }\n  changeLikeCardStatus(id, status) {\n    return fetch(`${this.baseUrl}/cards/likes/${id}`, {\n        method: `${(status) ? `PUT` : `DELETE`}`,\n        headers: {\n          authorization: this.auth\n        }\n    })\n        .then((res) => {\n            if (res.ok) {\n                return res.json();\n            }\n            return Promise.reject(`Ошибка: ${res.status} ${res.statusText}`);\n        })\n  }\n\n}\n\nconst api = new Api(apiSettings);\n\nexport default api;","import React from \"react\";\r\n\r\nfunction ConfirmDeletePopup({isOpen, className, formName, onSubmitClick, onClose, title,}) {\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmitClick();\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={isOpen ? `popup  ${className} popup_open` : `popup  ${className}`}\r\n    >\r\n      <form\r\n        className={`popup__form ${formName}`}\r\n        method=\"post\"\r\n        action=\"#\"\r\n        noValidate\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <button\r\n          className=\"popup__button-close confirmation__button-close\"\r\n          type=\"button\"\r\n          aria-label=\"закрыть\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <h3 className=\"popup__title\">{title}</h3>\r\n        <button className=\"popup__button-submit\" type=\"submit\" aria-label=\"Да\">\r\n          Да\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConfirmDeletePopup;\r\n","import React, {useState} from 'react';\r\nimport Card from './Card';\r\nimport api from '../utils/Api';\r\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick}) {\r\n    const user = React.useContext(CurrentUserContext).user;\r\n    const cards = React.useContext(CurrentUserContext).cards;\r\n    const setCards = React.useContext(CurrentUserContext).setCards;\r\n    const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = useState(false);\r\n    const [cardToDeleteId, setCardToDeleteId] = useState('');\r\n\r\n    function openConfirmDeletePopup() {\r\n        setConfirmDeletePopupOpen(true);\r\n    }\r\n    function closeConfirmDeletePopup() {\r\n        setConfirmDeletePopupOpen(false);\r\n    }\r\n    function onConfirmClick() {\r\n        api.deleteCard(cardToDeleteId)\r\n            .then(()=> {\r\n                const newCards = cards.filter((card) => card._id !== cardToDeleteId);\r\n                setCards(newCards);\r\n            })\r\n            .catch(err => console.log(err));\r\n        closeConfirmDeletePopup();\r\n    }\r\n    function handleCardLike(card) {\r\n        // Снова проверяем, есть ли уже лайк на этой карточке\r\n        const isLiked = card.likes.some(i => i._id === user._id);\r\n        // Отправляем запрос в API и получаем обновлённые данные карточки\r\n        api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\r\n            // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n          const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n          // Обновляем стейт\r\n          setCards(newCards);\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n    \r\n    function handleCardDelete(cardId) {\r\n        openConfirmDeletePopup();\r\n        setCardToDeleteId(cardId);    \r\n    }\r\n\r\n    return (\r\n        <main>\r\n            <section className=\"profile\">\r\n                <img src={user.avatar} alt=\"Аватар\" className=\"profile__logo\" />\r\n                <div className=\"profile__avatar-hover\" onClick={onEditAvatar}/>\r\n                <div className=\"profile__info\">\r\n                <div className=\"profile__user\">\r\n                    <h3 className=\"profile__name\">{user.name}</h3>\r\n                    <p className=\"profile__occupation\">{user.about}</p>\r\n                </div>\r\n                <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile}/>\r\n                </div>\r\n                <button className=\"profile__add-button\" type=\"button\"  onClick={onAddPlace}/>\r\n            </section>\r\n            <section className=\"places\" aria-label=\"Элементы\">\r\n                {(cards.map((card) => <Card key={card._id} onCardClick={onCardClick}  onCardLike={handleCardLike} onCardDelete={handleCardDelete} card={card}/>))}\r\n            </section>\r\n            <ConfirmDeletePopup isOpen={isConfirmDeletePopupOpen} onClose={closeConfirmDeletePopup}\r\n             title=\"Вы уверены?\" className=\"confirmation\" formName=\"confirmation__form\" onSubmitClick={onConfirmClick}/>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction ImagePopup({isOpen, link, name, onClose}) {\r\n  return (\r\n        <div className={(isOpen  ? `popup show-photo popup_open` : `popup show-photo` )}>\r\n            <div className=\"show-photo__window\">\r\n            <button\r\n                className=\"popup__button-close show-photo__button-close\"\r\n                type=\"button\"\r\n                aria-label=\"закрыть\"\r\n                onClick={onClose}\r\n            />\r\n            <img\r\n                src={link.toString()}\r\n                alt={name}\r\n                className=\"show-photo__image\"\r\n            />\r\n            <p className=\"show-photo__title\">{name}</p>\r\n            </div>\r\n        </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nfunction PopupWithForm({isOpen, className, formName, Submit, onClose, title,  children, buttonText}) {\r\n    return (\r\n      <div className={(isOpen ? `popup  ${className} popup_open`: `popup  ${className}`)}>\r\n        <form\r\n          className={`popup__form ${formName}`}\r\n          method=\"post\"\r\n          action=\"#\"\r\n          noValidate\r\n          onSubmit={Submit}\r\n        >\r\n          <button\r\n            className=\"popup__button-close\"\r\n            type=\"button\"\r\n            aria-label=\"закрыть\"\r\n            onClick={onClose}\r\n          />\r\n          <h3 className=\"popup__title\">{title}</h3>\r\n          {children}\r\n          <button\r\n            className=\"popup__button-submit\"\r\n            type=\"submit\"\r\n          >\r\n            {buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n  \r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport api from '../utils/Api';\r\n\r\nfunction EditProfilePopup({isOpen, onClose}) {\r\n  const user = React.useContext(CurrentUserContext).user;\r\n  const setUser = React.useContext(CurrentUserContext).setCurrentUser;\r\n  const [name, setName] = React.useState(\"\");\r\n  const [occupation, setOccupation] = React.useState(\"\");\r\n  const [buttonText, setButtonText ]= React.useState('Сохранить');\r\n\r\n  React.useEffect(() => {\r\n    setName(user.name);\r\n    setOccupation(user.about);\r\n  }, [user]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setButtonText('Сохранение...');\r\n    api.updateUserProfile(name, occupation)\r\n        .then((res) => {\r\n            setUser(res);\r\n            onClose();\r\n            setButtonText('Сохранить');\r\n        })\r\n        .catch(err => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      Submit={handleSubmit}\r\n      title=\"Редактировать профиль\"\r\n      buttonText={buttonText}\r\n      children={\r\n        <>\r\n          <div className=\"popup__input-field\">\r\n            <input\r\n              id=\"input-name\"\r\n              className=\"popup__input edit-profile__input-name\"\r\n              type=\"text\"\r\n              value={name || ''}\r\n              onChange={(e) => setName(e.target.value)}\r\n              name=\"name\"\r\n              placeholder=\"Введите имя\"\r\n              minLength={2}\r\n              maxLength={40}\r\n              pattern=\"^[A-Za-zА-ЯЁа-яё -]+$\"\r\n              required\r\n            />\r\n            <span id=\"input-name-error\" className=\"popup__input-error\" />\r\n          </div>\r\n          <div className=\"popup__input-field\">\r\n            <input\r\n              id=\"input-occupation\"\r\n              className=\"popup__input edit-profile__input-occupation\"\r\n              type=\"text\"\r\n              value={occupation || ''}\r\n              onChange={(e) => setOccupation(e.target.value)}\r\n              name=\"occupation\"\r\n              placeholder=\"Род занятий\"\r\n              minLength={2}\r\n              maxLength={200}\r\n              required\r\n            />\r\n            <span id=\"input-occupation-error\" className=\"popup__input-error\" />\r\n          </div>\r\n        </>\r\n      }\r\n    ></PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport api from '../utils/Api';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose}) {\r\n    const setUser = React.useContext(CurrentUserContext).setCurrentUser;\r\n    const inputRef = React.useRef();\r\n    const [buttonText, setButtonText ]= React.useState('Сохранить');\r\n    \r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        setButtonText('Сохранение...');\r\n        api.setUserAvatar(inputRef.current.value)\r\n        .then((user) => {\r\n            setUser(user)\r\n            onClose();\r\n            inputRef.current.value = '';\r\n            setButtonText('Сохранить');\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n        isOpen={isOpen}\r\n        className=\"change-avatar\"\r\n        formName=\"change-avatar__form\"\r\n        title=\"Обновить аватар\"\r\n        buttonText={buttonText}\r\n        onClose={onClose}\r\n        Submit={handleSubmit}\r\n        children={\r\n          <div className=\"popup__input-field\">\r\n            <input\r\n              className=\"popup__input change-avatar__input-link\"\r\n              ref={inputRef}\r\n              type=\"url\"\r\n              id=\"change-avatar__input-link\"\r\n              name=\"link\"\r\n              defaultValue=\"\"\r\n              placeholder=\"Ссылка на картинку\"\r\n              required\r\n            />\r\n            <span id=\"change-avatar__input-link-error\" className=\"popup__input-error\" />\r\n          </div>\r\n        }\r\n      />\r\n    )\r\n}\r\nexport default EditAvatarPopup","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport api from \"../utils/Api\";\r\n\r\nfunction AddPlacePopup({ isOpen, onClose }) {\r\n  const [placeName, setPlaceName] = React.useState('');\r\n  const [placeLink, setPlaceLink] = React.useState(''); \r\n  const cards = React.useContext(CurrentUserContext).cards;\r\n  const setCards = React.useContext(CurrentUserContext).setCards;\r\n  const [buttonText, setButtonText ]= React.useState('Создать');\r\n  \r\n  function handleSubmit(e) {\r\n      e.preventDefault();\r\n      setButtonText('Сохранение...');\r\n      api.addNewCard(placeName, placeLink)\r\n        .then((newCard) => {\r\n          setCards([newCard, ...cards]);\r\n          setButtonText('Создать');\r\n        })\r\n        .catch(err => console.log(err));\r\n      setPlaceLink('');\r\n      setPlaceName('');\r\n      onClose();\r\n      \r\n  }\r\n    \r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      className=\"add-card\"\r\n      formName=\"add-card__form\"\r\n      title=\"Новое место\"\r\n      buttonText={buttonText}\r\n      Submit={handleSubmit}\r\n      onClose={onClose}\r\n      children={\r\n        <>\r\n          <div className=\"popup__input-field\">\r\n            <input\r\n              className=\"popup__input add-card__input-name\"\r\n              type=\"text\"\r\n              id=\"input-place-name\"\r\n              name=\"name\"\r\n              value={placeName}\r\n              onChange={(e)=>setPlaceName(e.target.value)}\r\n              placeholder=\"Название\"\r\n              minLength={2}\r\n              maxLength={30}\r\n              required\r\n            />\r\n            <span id=\"input-place-name-error\" className=\"popup__input-error\" />\r\n          </div>\r\n          <div className=\"popup__input-field\">\r\n            <input\r\n              className=\"popup__input add-card__input-link\"\r\n              type=\"url\"\r\n              id=\"input-place-link\"\r\n              name=\"link\"\r\n              value={placeLink}\r\n              onChange={(e)=>setPlaceLink(e.target.value)}\r\n              placeholder=\"Ссылка на картинку\"\r\n              required\r\n            />\r\n            <span id=\"input-place-link-error\" className=\"popup__input-error\" />\r\n          </div>\r\n        </>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from \"react\";\r\nimport \"../blocks/spinner/Spinner.css\";\r\n\r\nfunction Spinner() {\r\n  return <div className=\"Spinner\"/>;\r\n}\r\n\r\nexport default Spinner;","import React, {useState, useEffect} from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from '../utils/Api';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport Spinner from './Spinner';\n\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(\n    false\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(\n    false\n  );\n  const [selectedCard, setSelectedCard] = useState({\n    isOpen: false,\n    name: \"\",\n    link: \"\",\n  });\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([userData, cards]) => {\n        setCards(cards);\n        setCurrentUser(userData);\n      })\n      .then(() => setIsLoading(false))\n      .catch(err => console.log(err));\n  }, []);\n  \n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function handleCardClick(name, link ) {\n    setSelectedCard({\n      isOpen: true,\n      name: name,\n      link: link,\n    });\n  }\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({\n      isOpen: false,\n      name: \"\",\n      link: \"\",\n    });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={{user: currentUser, cards: cards, setCards, setCurrentUser}}>\n      <Header />\n      {isLoading ? (<Spinner/>) :\n        <Main\n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddPlaceClick}\n        onEditAvatar={handleEditAvatarClick}\n        onCardClick={handleCardClick}\n        />\n      }\n      <Footer />\n      <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} />\n      <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups}/>\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups}/>\n      <ImagePopup {...selectedCard} onClose={closeAllPopups} />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.querySelector('#root')\n);\n\n"],"sourceRoot":""}